{"ast":null,"code":"var _jsxFileName = \"D:\\\\DATN\\\\WebAdmin1\\\\src\\\\Screen\\\\ChartWeek.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Chart, CategoryScale, LinearScale, BarController, BarElement, Title, Tooltip, Legend } from \"chart.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TopProductsChart = () => {\n  _s();\n  const [week, setWeek] = useState(\"\");\n  const [year, setYear] = useState(new Date().getFullYear()); // Lưu năm được chọn\n  const [chartInstance, setChartInstance] = useState(null); // Để hủy biểu đồ cũ\n\n  useEffect(() => {\n    // Register necessary chart components\n    Chart.register(CategoryScale, LinearScale, BarController, BarElement, Title, Tooltip, Legend);\n    const fetchData = async () => {\n      try {\n        const query = `?week=${week || \"\"}&year=${year}`;\n        const res = await fetch(`http://localhost:6677/products/getTop10PW${query}`);\n        const result = await res.json();\n        const labels = [];\n        const data = [];\n        result.data.forEach(element => {\n          labels.push(element.name);\n          data.push(Number(element.sold));\n        });\n        const ctx = document.getElementById(\"myChart\").getContext(\"2d\");\n\n        // Hủy biểu đồ cũ trước khi tạo biểu đồ mới\n        if (chartInstance) {\n          chartInstance.destroy();\n        }\n        const newChart = new Chart(ctx, {\n          type: \"bar\",\n          data: {\n            labels: labels,\n            datasets: [{\n              label: \"Lượt bán\",\n              data: data,\n              borderWidth: 1,\n              backgroundColor: [\"rgba(255, 99, 132, 0.6)\", \"rgba(54, 162, 235, 0.6)\", \"rgba(75, 192, 192, 0.6)\"],\n              borderColor: [\"rgba(255, 99, 132, 1)\", \"rgba(54, 162, 235, 1)\", \"rgba(75, 192, 192, 1)\"]\n            }]\n          },\n          options: {\n            scales: {\n              y: {\n                beginAtZero: true\n              }\n            }\n          }\n        });\n        setChartInstance(newChart); // Lưu instance mới\n      } catch (error) {\n        console.error(\"Error fetching or displaying data:\", error);\n      }\n    };\n    fetchData();\n  }, [week, year]); // Gọi lại mỗi khi tuần hoặc năm thay đổi\n\n  // Tạo danh sách tuần từ 1 đến 52\n  const weeks = Array.from({\n    length: 52\n  }, (_, i) => i + 1);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 5\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        padding: 10,\n        color: \"#27AAE1\",\n        fontSize: \"24px\",\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        textTransform: \"uppercase\"\n      },\n      children: \"Top 10 s\\u1EA3n ph\\u1EA9m b\\xE1n ch\\u1EA1y trong tu\\u1EA7n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        marginBottom: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginRight: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"week\",\n          children: \"Ch\\u1ECDn tu\\u1EA7n:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"week\",\n          value: week,\n          onChange: e => setWeek(e.target.value),\n          style: {\n            marginLeft: 5\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"T\\u1EA5t c\\u1EA3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), weeks.map(w => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: w,\n            children: [\"Tu\\u1EA7n \", w]\n          }, w, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"year\",\n          children: \"Ch\\u1ECDn n\\u0103m:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"year\",\n          value: year,\n          onChange: e => setYear(e.target.value),\n          style: {\n            marginLeft: 5\n          },\n          children: [2023, 2024, 2025].map(y => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: y,\n            children: y\n          }, y, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"myChart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n_s(TopProductsChart, \"GpOfsbjVOv8QWaaiJWtZTLkQl3Y=\");\n_c = TopProductsChart;\nexport default TopProductsChart;\nvar _c;\n$RefreshReg$(_c, \"TopProductsChart\");","map":{"version":3,"names":["React","useEffect","useState","Chart","CategoryScale","LinearScale","BarController","BarElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","TopProductsChart","_s","week","setWeek","year","setYear","Date","getFullYear","chartInstance","setChartInstance","register","fetchData","query","res","fetch","result","json","labels","data","forEach","element","push","name","Number","sold","ctx","document","getElementById","getContext","destroy","newChart","type","datasets","label","borderWidth","backgroundColor","borderColor","options","scales","y","beginAtZero","error","console","weeks","Array","from","length","_","i","style","padding","children","color","fontSize","fontWeight","textAlign","textTransform","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","marginBottom","marginRight","htmlFor","id","value","onChange","e","target","marginLeft","map","w","_c","$RefreshReg$"],"sources":["D:/DATN/WebAdmin1/src/Screen/ChartWeek.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Chart,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarController,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\n\r\nconst TopProductsChart = () => {\r\n  const [week, setWeek] = useState(\"\"); \r\n  const [year, setYear] = useState(new Date().getFullYear()); // Lưu năm được chọn\r\n  const [chartInstance, setChartInstance] = useState(null); // Để hủy biểu đồ cũ\r\n\r\n  useEffect(() => {\r\n    // Register necessary chart components\r\n    Chart.register(\r\n      CategoryScale,\r\n      LinearScale,\r\n      BarController,\r\n      BarElement,\r\n      Title,\r\n      Tooltip,\r\n      Legend\r\n    );\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        const query = `?week=${week || \"\"}&year=${year}`;\r\n        const res = await fetch(`http://localhost:6677/products/getTop10PW${query}`);\r\n        const result = await res.json();\r\n\r\n        const labels = [];\r\n        const data = [];\r\n        result.data.forEach((element) => {\r\n          labels.push(element.name);\r\n          data.push(Number(element.sold));\r\n        });\r\n\r\n        const ctx = document.getElementById(\"myChart\").getContext(\"2d\");\r\n\r\n        // Hủy biểu đồ cũ trước khi tạo biểu đồ mới\r\n        if (chartInstance) {\r\n          chartInstance.destroy();\r\n        }\r\n\r\n        const newChart = new Chart(ctx, {\r\n          type: \"bar\",\r\n          data: {\r\n            labels: labels,\r\n            datasets: [\r\n              {\r\n                label: \"Lượt bán\",\r\n                data: data,\r\n                borderWidth: 1,\r\n                backgroundColor: [\r\n                  \"rgba(255, 99, 132, 0.6)\",\r\n                  \"rgba(54, 162, 235, 0.6)\",\r\n                  \"rgba(75, 192, 192, 0.6)\",\r\n                ],\r\n                borderColor: [\r\n                  \"rgba(255, 99, 132, 1)\",\r\n                  \"rgba(54, 162, 235, 1)\",\r\n                  \"rgba(75, 192, 192, 1)\",\r\n                ],\r\n              },\r\n            ],\r\n          },\r\n          options: {\r\n            scales: {\r\n              y: {\r\n                beginAtZero: true,\r\n              },\r\n            },\r\n          },\r\n        });\r\n\r\n        setChartInstance(newChart); // Lưu instance mới\r\n      } catch (error) {\r\n        console.error(\"Error fetching or displaying data:\", error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [week, year]); // Gọi lại mỗi khi tuần hoặc năm thay đổi\r\n\r\n  // Tạo danh sách tuần từ 1 đến 52\r\n  const weeks = Array.from({ length: 52 }, (_, i) => i + 1);\r\n\r\n  return (\r\n    <div style={{ padding: 5 }}>\r\n      <h1\r\n        style={{\r\n          padding: 10,\r\n          color: \"#27AAE1\",\r\n          fontSize: \"24px\",\r\n          fontWeight: \"bold\",\r\n          textAlign: \"center\",\r\n          textTransform: \"uppercase\",\r\n        }}\r\n      >\r\n        Top 10 sản phẩm bán chạy trong tuần\r\n      </h1>\r\n\r\n      <div style={{ display: \"flex\", justifyContent: \"center\", marginBottom: 20 }}>\r\n        <div style={{ marginRight: 10 }}>\r\n          <label htmlFor=\"week\">Chọn tuần:</label>\r\n          <select\r\n            id=\"week\"\r\n            value={week}\r\n            onChange={(e) => setWeek(e.target.value)}\r\n            style={{ marginLeft: 5 }}\r\n          >\r\n            <option value=\"\">Tất cả</option>\r\n            {weeks.map((w) => (\r\n              <option key={w} value={w}>\r\n                Tuần {w}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"year\">Chọn năm:</label>\r\n          <select\r\n            id=\"year\"\r\n            value={year}\r\n            onChange={(e) => setYear(e.target.value)}\r\n            style={{ marginLeft: 5 }}\r\n          >\r\n            {[2023, 2024, 2025].map((y) => (\r\n              <option key={y} value={y}>\r\n                {y}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <canvas id=\"myChart\"></canvas>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopProductsChart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}